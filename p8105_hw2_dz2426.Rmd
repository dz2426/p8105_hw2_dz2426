---
title: "p8105_hw2_dz2426"
author: "Duzhi Zhao"
date: "9/24/2019"
output: github_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)

library(tidyverse)
library(readxl)
```

## Problem 1
# Section 1.1
```{r message = FALSE}
# Load in Mr.Trash Wheel dataset
MTW_data = read_excel("./data/HealthyHarborWaterWheelTotals2018-7-28.xlsx", sheet = 1) %>%
  janitor::clean_names() %>% 
  drop_na(dumpster) %>%  #remove NA 
  select(-x15) %>%     #remove the last column with notes
  mutate(
    sports_balls = round(sports_balls, digits = 0) %>% #round to nearest integer
      as.integer()    #change type from double to integer
  )
```
# Section 1.2
```{r}
# Load in and clean Precipitation 2017 dataset
Precip_2017 = read_excel("./data/HealthyHarborWaterWheelTotals2018-7-28.xlsx", sheet = 4, skip = 1) %>% 
  janitor::clean_names() %>% 
  drop_na(month) %>% 
  mutate(
    year = 2017       #add variabel year
  )

# Load in and clean Precipitation 2018 dataset
Precip_2018 = read_excel("./data/HealthyHarborWaterWheelTotals2018-7-28.xlsx", sheet = 3, skip = 1) %>% 
  janitor::clean_names() %>% 
  drop_na(total, month) %>%
  mutate(
    year = 2018         
  )

# Combine two datasets
Combine_ds = 
  bind_rows(Precip_2017, Precip_2018) %>% 
  janitor::clean_names() %>% 
  arrange(month) %>%   #list data in the order of month
  rename(total_in = total) %>%   #include units ("inches") for total precipitation
  mutate(
    month = as.character(month.abb[month])  #change month to character and correspond each number to its abbreviation
  )

```
Comment 1: <br />

The resulting Mr.Trash Wheel dataset (MTW_data) includes `r dim(MTW_data)[1]` observations and `r dim(MTW_data)[2]` variables. Variables include dumpster number, date of collection, amount of total and litter type, and categories of the items (e.g. sports balls and plastic bottles). <br />

The combined precipitation data (Combine_ds) includes `r dim(Combine_ds)[1]` observations and `r dim(Combine_ds)[2]` variables, including month, total precipitation, and the year of precipitation. <br />

The total precipitation in 2018 was `r sum(pull(Precip_2018, total))` inches. <br />
The median number of sports balls in a dumpster in 2017 was `r median(pull(MTW_data, sports_balls)[pull(MTW_data,year) == 2017])`.

## Problem 2
```{r}
# Load in pols_month.csv
pols_month = read_csv("./data/pols-month.csv") %>% 
  janitor::clean_names() %>% 
  separate(col = mon, into = c("year", "month", "day")) %>% 
  mutate(
  month = as.double(month),
  month = as.character(month.abb[month]),
  president = ifelse(prez_gop == TRUE, "republican", "democratic")
  )
 #select(-day)

```


